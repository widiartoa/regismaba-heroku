<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<div th:replace="resources"></div>

<title>Calon Mahasiswa - Mengubah IDM</title>

<!--  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"> </link>
  <link rel="stylesheet" href="/resources/demos/style.css"> </link>
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script>
  $( function() {
    $( "#datepicker" ).datepicker({
    	 dateFormat: "yy-mm-dd"
    });
  } );
  </script> -->

</head>

<body>
	<div th:include="calon_mahasiswa-navbar"></div>

	<div class="container">
		<div class="content content-top">
			<div id="contact">
				<form action="/c6/calon-mahasiswa/biodata/update/submit" method="post" enctype="multipart/form-data" >
					<input type="hidden"  th:name="${_csrf.parameterName}"   th:value="${_csrf.token}"/>
					<div class="row">
						<div class="col-sm-12"><h3><span class="glyphicon glyphicon-user"></span>Isi Biodata</h3></div>
					</div>
					
					<hr/>
					
					<div class="form-group">
						<label for="name">Nama Lengkap</label> <input type="text" name="name"
							class="form-control" th:placeholder="${user.nama_lengkap}" disabled="true"/>
					</div>
					
					<div class="form-group">
						<label for="tanggal_lahir" >Tanggal Lahir *</label> 
						<input
							type="date" name="tanggal_lahir" class="form-control"
							th:value="${biodata.tanggal_lahirr}" th:placeholder="${biodata.tanggal_lahirr}" data-validation="required"
							data-validation-error-msg="Tanggal lahir harus diisi"/>
					</div>
<!-- lalala -->		
<!-- 					<div class="row">
						<div class="form-group">
							<label for="hari">Hari</label> 
							<input type="date" name="hari" class="form-control" 
								placeholder="YYYY-MM-DD" th:min="${#dates.format(#dates.createNow(), 'YYYY-MM-dd')}" required="true" />
						</div>
					</div> -->
					
					
					
					<div class="form-group">
						<label for="jenis_kelamin">Jenis Kelamin</label> <br></br>
						<div th:if="${biodata.jenis_kelamin} == 'P'">
							<input type="radio" name="jenis_kelamin" value="L">Laki-laki</input>
							<input type="radio" name="jenis_kelamin" value="P" checked="checked">Perempuan</input>
						</div>
						<div th:if="${biodata.jenis_kelamin} == 'L'">
							<input type="radio" name="jenis_kelamin" value="L" checked="checked">Laki-laki</input>
							<input type="radio" name="jenis_kelamin" value="P">Perempuan</input>
						</div>
					</div>

					<div class="form-group">
						<label for="nomor_telepon">Nomor Telepon *</label> 
						<input
							type="number" name="nomor_telepon" class="form-control"
							th:value="${biodata.nomor_telepon}" data-validation="required"
							data-validation-error-msg="Nomor telepon harus diisi"/>
					</div>
					
					<div class="form-group">
						<label for="kewarganegaraan">Kewarganegaraan *</label> 
						<input
							type="text" name="kewarganegaraan" class="form-control"
							th:value="${biodata.kewarganegaraan}" data-validation="required"
							data-validation-error-msg="Kewarganegaraan harus diisi"/>
					</div>
					
					<div class="form-group">
						<label for="agama_id">Agama</label> 
						<select id="agama_id_select" name="agama_id" class="form-control">
							<option th:each="agama : ${agamas}" th:value="${agama.agama_id}" th:text="${agama.nama_agama}"></option>							
						</select>
					</div>
					
					<div class="form-group">
						<label for="nomor_ktp">Nomor KTP *</label> 
						<input type="text"
							name="nomor_ktp" class="form-control" placeholder="Nomor KTP" data-validation="required"
							th:value="${biodata.nomor_ktp}" data-validation-error-msg="Nomor KTP harus diisi"/>
					</div>
					
				<!-- 					<div class="col-md-6">
							<div class="form-group">
								<label for="form_survey_kesehatan">Form Survey Kesehatan</label> <input type="text"
									name="form_survey_kesehatan" class="form-control" placeholder="Formulir Survey Kesehatan"/>
							</div>
						</div> -->
						
					<div class="form-group">
						<label for="scan_ktp">Scan Kartu Tanda Penduduk(KTP) *</label> 
						<div class="input-group" name="scan_ktp">
							<input type="text" class="form-control" id="basic-addon1" readonly="true" data-validation="required" data-validation-error-msg="Scan KTP harus diisi" />
							<label class="input-group-btn">
								<span class="btn btn-default">Browse&hellip;
									<input type="file" name="scan_ktp"
										placeholder="Scan KTP" style="display:none"/>
								</span>
							</label>
						</div>
					</div>
					
	<!-- 					<div class="col-md-6">
							<div class="form-group">
								<label for="hasil_tes_kesehatan">Hasil Tes Kesehatan</label> <input type="text"
									name="hasil_tes_kesehatan" class="form-control" placeholder="Hasil Tes Kesehatan"/>
							</div>
						</div> -->
					<!-- <div class="row">
						<div class="col-md-6">
							<div class="form-group">
								<div class="input-group">
									<span class="input-group-addon" id="basic-addon1">Sidik Jari</span>
									<span class="input-group-btn">
										<input class="btn btn-warning" type="file" name="sidik_jari"
									placeholder="Scan Sidik Jari">Browse</input>
									</span>
								</div>
							</div>
						</div>
					</div> -->
					
					<div class="form-group">
						<label for="scan_kk">Scan Kartu Keluarga(KK) *</label>
						<div class="input-group" name="scan_kk">
							<input type="text" class="form-control" id="basic-addon1" readonly="true" data-validation="required" data-validation-error-msg="Scan KK harus diisi"  />
							<label class="input-group-btn">
								<span class="btn btn-default">Browse&hellip;
									<input type="file" name="scan_kk"
										placeholder="Scan KK" style="display:none" />
								</span>
							</label>
						</div>
					</div>
					
					<div class="form-group">
						<label for="scan_spm">Scan Surat Pernyataan Mahaiswa *</label>
						<div class="input-group" name="scan_spm">
							<input type="text" class="form-control" id="basic-addon1" readonly="true" data-validation="required" data-validation-error-msg="Scan Surat Pernyataan Mahasiswa harus diisi"  />
							<label class="input-group-btn">
								<span class="btn btn-default">Browse&hellip;
									<input type="file" name="scan_surat_pernyataan_mahasiswa"
										placeholder="Surat Pernyataan Mahasiswa" style="display:none" />
								</span>
							</label>
						</div>
					</div>
				
					<br/>
										
					<!-- ****************** ISI ALAMAT ***************** -->					
					
					<div class="row">
						<div class="col-sm-12"><h3>Isi Alamat</h3></div>
					</div>
					
					<hr/>
					
					<div class="form-group">
						<label for="nama_provinsi">Provinsi</label> 
						<select id="nama_provinsi_select" class="form-control" name="provinsi_id" >
							<option th:each="p : ${provinsis}" 
									th:value="${p.provinsi_id}"
									th:selected="${provinsi.provinsi_id==p.provinsi_id}" 
									th:text="${p.nama_provinsi}"></option>							
						</select>
					</div>
					
					<div class="form-group">
						<label for="kota_kabupaten_id">Kabupaten/Kota</label>
						<select id="kota_kabupaten_select" name="kota_kabupaten_id" class="form-control">
							<option th:value="${alamat.kota_kabupaten_id}" th:text="${kotaKabupaten.nama_kota_kabupaten}"></option>						
						</select>
					</div>
					
					<div class="form-group">
						<label for="kecamatan">Nama Kecamatan *</label> 
						<input type="text"
							name="kecamatan" class="form-control"
							th:value="${alamat.kecamatan}" data-validation="required"
							data-validation-error-msg="Nama kecamatan harus diisi" />
					</div>
					
					<div class="form-group">
						<label for="kelurahan">Nama Kelurahan *</label> 
						<input type="text"
							name="kelurahan" class="form-control"
							th:value="${alamat.kelurahan}" data-validation="required"
							data-validation-error-msg="Nama kelurahan harus diisi" />
					</div>
					
					<div class="form-group">
						<label for="jalan">Nama Jalan *</label> 
						<input type="text"
							name="jalan" class="form-control" th:value="${alamat.jalan}" data-validation="required"
							data-validation-error-msg="Nama jalan harus diisi" />
					</div>
					
					<div class="form-group">
						<label for="kode_pos">Kode Pos *</label> 
						<input type="text"
							name="kode_pos" class="form-control" th:value="${alamat.kode_pos}" data-validation="required"
							data-validation-error-msg="Kode pos harus diisi"/>
					</div>
					
					<!-- ****************** ISI PENDIDIKAN TERAKHIR ***************** -->
					
					<br/>
					
					<div class="row">
						<div class="col-sm-12"><h3>Isi Pendidikan Terakhir</h3></div>
					</div>
					
					<hr/>
					
					<!-- <div class="row">
						<div class="col-md-6">
							<div class="form-group">
								<label for="jenjang">Jenjang</label> <input type="text" name="jenjang"
									class="form-control" placeholder="Jenjang" />
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-6">
							<div class="form-group">
								<label for="nama_institusi">Nama Institusi</label> <input type="text" name="nama_institusi"
									class="form-control" placeholder="Nama Institusi" />
							</div>
						</div>
					</div> -->
					
					<div class="form-group">
						<label for="nama_tingkat_pendidikan">Tingkat Pendidikan Terakhir</label> 
						<select id="nama_tingkat_pendidikan_select" class="form-control" name="tingkat_pendidikan_id">
							<!-- <option value="null">[Pilih Tingkat Pendidikan Terakhir]</option> -->
							<!-- <option th:value="${tingkatPendidikan.tingkat_pendidikan_id}" th:text="${tingkatPendidikan.nama_tingkat_pendidikan}">[Pilih Provinsi]</option>
							<option th:each="tingkatPendidikan : ${tingkatPendidikans}" th:value="${tingkatPendidikan.tingkat_pendidikan_id}" th:text="${tingkatPendidikan.nama_tingkat_pendidikan}"></option>							
						 -->
							<option th:each="tp : ${tingkatPendidikans}" 
									th:value="${tp.tingkat_pendidikan_id}"
									th:selected="${tingkatPendidikan.tingkat_pendidikan_id==tp.tingkat_pendidikan_id}" 
									th:text="${tp.nama_tingkat_pendidikan}"></option>	
						
						
						</select>
					</div>
					
					<div class="form-group">
						<label for="jenjang">Jenjang</label> 
						<select id="nama_jenjang_select" name="jenjang" class="form-control">
							<!-- <option value="null">[Pilih Jenjang Terakhir]</option> -->
							<option th:value="${jenjang.jenjang_id}" th:text="${jenjang.nama_jenjang}"></option>
							
							<!-- <div th:if="${ijazah.jenjang} == '1'">
								<option th:value="${ijazah.jenjang}" th:text="Sarjana"></option>
							</div>
							<div th:if="${ijazah.jenjang} == '2'">
								<option th:value="${ijazah.jenjang}" th:text="Magister"></option>
							</div>
							<div th:if="${ijazah.jenjang} == '3'">
								<option th:value="${ijazah.jenjang}" th:text="Doktor"></option>
							</div>
							<div th:if="${ijazah.jenjang} == '4'">
								<option th:value="${ijazah.jenjang}" th:text="Profesi"></option>
							</div>
							<div th:if="${ijazah.jenjang} == '5'">
								<option th:value="${ijazah.jenjang}" th:text="Spesialis"></option>
							</div>
							<div th:if="${ijazah.jenjang} == '6'">
								<option th:value="${ijazah.jenjang}" th:text="Vokasi"></option>
							</div>
							<div th:if="${ijazah.jenjang} == '7'">
								<option th:value="${ijazah.jenjang}" th:text="SMA"></option>
							</div> -->

							<option th:each="jenjang : ${jenjangs}" th:value="${jenjang.jenjang_id}" th:text="${jenjang.nama_jenjang}"></option>							
						</select>
					</div>
					
					<div class="form-group">
						<label for="institusi_id">Nama Institusi</label>
						<select id="institusi_select" name="institusi_id" class="form-control">
							<option th:value="${institusi.institusi_id}" th:text="${institusi.nama_institusi}"></option>
						</select>
					</div>
					
					<div class="form-group">
						<label for="nomor_ijazah">Nomor Ijazah *</label> 
						<input type="text"
							name="nomor_ijazah" class="form-control"
							th:value="${ijazah.nomor_ijazah}" data-validation="required"
							data-validation-error-msg="Nomor ijazah harus diisi"/>
					</div>
				
					<div class="form-group">
						<label for="scan_ijazah">Scan Ijazah *</label>
						<div class="input-group" name="scan_ijazah">
							<input type="text" class="form-control" id="basic-addon1" readonly="true" data-validation="required" data-validation-error-msg="Scan Ijazah harus diisi"   />
							<label class="input-group-btn">
								<span class="btn btn-default">Browse&hellip;
								<input type="file" name="scan_ijazah" style="display:none;"
									placeholder="Scan Ijazah" />
								</span>
							</label>
						</div>
					</div>
					
					<div class="form-group">
						<label for="scan_pernyataan_ijazah">Scan Pernyataan Ijazah *</label>
						<div class="input-group" name="scan_pernyataan_ijazah">
							<input type="text" class="form-control" id="basic-addon1" readonly="true" data-validation="required" data-validation-error-msg="Scan pernyataan ijazah harus diisi"  />
							<label class="input-group-btn">
								<span class="btn btn-default">Browse&hellip;
								<input type="file" name="scan_pernyataan_ijazah" style="display:none;"
									placeholder="Scan Pernyataan Ijazah" />
								</span>
							</label>
						</div>
					</div>
					
					<br/>
					
					<!-- ****************** ISI PENDIDIKAN TERAKHIR ***************** -->
					
					<div class="row">
						<div class="col-sm-12"><h3>Isi Data Kesehatan</h3></div>
					</div>
					
					<hr/>
					
					<div class="form-group">
						<label for="nomor_asuransi">Nomor Asuransi</label> 
						<input
							type="text" name="nomor_asuransi" class="form-control"
							th:value="${asuransiKesehatan.nomor_asuransi}" />
					</div>
					
					<div class="form-group">
						<label for="nomor_asuransi">Nomor Penerbit Asuransi</label> 
						<input
							type="text" name="nomor_penerbit_asuransi" class="form-control"
							th:value="${asuransiKesehatan.nomor_penerbit_asuransi}" />
					</div>
					
					<div class="form-group">
						<label for="nomor_asuransi">Tanggal Kadaluarsa Asuransi</label>
						<input
							type="date" name="expired_date" class="form-control"
							th:value="${asuransiKesehatan.expired_date_format}" />
					</div>
		
					<div class="form-group">
						<label for="scan_kartu">Scan Kartu Asuransi</label>
						<div class="input-group" name="scan_kartu_asuransi">
							<input type="text" class="form-control" id="basic-addon1" readonly="true"  data-validation="required" data-validation-error-msg="Scan Kartu Asuransi harus diisi"   />
							<label class="input-group-btn">
								<span class="btn btn-default">Browse&hellip;
									<input type="file" name="scan_kartu" style="display:none;" placeholder="Scan Kartu Asuransi" />
								</span>
							</label>
						</div>
					</div>
					
					<div class="form-group">
						<label for="form_survey_kesehatan">Form Survey Kesehatan *</label>
						<div class="input-group" name="form_survey_kesehatan">
							<input type="text" class="form-control" id="basic-addon1" readonly="true" data-validation="required" data-validation-error-msg="Form survey kesehatan harus diisi"  />
							<label class="input-group-btn">
								<span class="btn btn-default">Browse&hellip;
									<input type="file" name="form_survey_kesehatan" style="display:none;" placeholder="Upload Form Survey Kesehatan" />
								</span>
							</label>
						</div>
					</div>
					
					<!-- <div class="row">
						<div class="col-md-6">
							<div class="form-group">
								<label for="hasil_tes_kesehatan">Hasil Tes Kesehatan</label> <input
									type="text" name="hasil_tes_kesehatan" class="form-control"
									placeholder="Hasil Tes Kesehatan" />
							</div>
						</div>
					</div> -->

					<br/>
					
					<!-- ****************** ISI PENDIDIKAN TERAKHIR ***************** -->
					
					<div class="row">
						<div class="col-sm-12"><h3>Isi Ukuran Jaket Almamater</h3></div>
					</div>
					
					<hr/>
					
					<div class="form-group">
						<label for="ukuran_jaket">Pilih Ukuran Jaket :</label>
						<div th:if="${biodata.ukuran_jaket} == 'S'">
							<input type="radio" name="ukuran_jaket" value="S" checked="checked">S</input>
							<input type="radio" name="ukuran_jaket" value="M">M</input>
							<input type="radio" name="ukuran_jaket" value="L">L</input>
							<input type="radio" name="ukuran_jaket" value="XL">XL</input>
							<input type="radio" name="ukuran_jaket" value="XXL">XXL</input>
						</div>
						<div th:if="${biodata.ukuran_jaket} == 'M'">
							<input type="radio" name="ukuran_jaket" value="S">S</input>
							<input type="radio" name="ukuran_jaket" value="M" checked="checked">M</input>
							<input type="radio" name="ukuran_jaket" value="L">L</input>
							<input type="radio" name="ukuran_jaket" value="XL">XL</input>
							<input type="radio" name="ukuran_jaket" value="XXL">XXL</input>
						</div>
						<div th:if="${biodata.ukuran_jaket} == 'L'">
							<input type="radio" name="ukuran_jaket" value="S">S</input>
							<input type="radio" name="ukuran_jaket" value="M">M</input>
							<input type="radio" name="ukuran_jaket" value="L" checked="checked">L</input>
							<input type="radio" name="ukuran_jaket" value="XL">XL</input>
							<input type="radio" name="ukuran_jaket" value="XXL">XXL</input>
						</div>
						<div th:if="${biodata.ukuran_jaket} == 'XL'">
							<input type="radio" name="ukuran_jaket" value="S">S</input>
							<input type="radio" name="ukuran_jaket" value="M">M</input>
							<input type="radio" name="ukuran_jaket" value="L">L</input>
							<input type="radio" name="ukuran_jaket" value="XL" checked="checked">XL</input>
							<input type="radio" name="ukuran_jaket" value="XXL">XXL</input>
						</div>
						<div th:if="${biodata.ukuran_jaket} == 'XXL'">
							<input type="radio" name="ukuran_jaket" value="S">S</input>
							<input type="radio" name="ukuran_jaket" value="M">M</input>
							<input type="radio" name="ukuran_jaket" value="L">L</input>
							<input type="radio" name="ukuran_jaket" value="XL">XL</input>
							<input type="radio" name="ukuran_jaket" value="XXL" checked="checked">XXL</input>
						</div>
						
					</div>
					
					<hr/>
					
					<div class="form-group" style="text-align: right">
						
						<div class="btn-group" role="group" aria-label="...">
						<a th:href="'/c6/calon-mahasiswa/biodata/view/' + ${mahasiswa.npm}"><button type="button" class="btn btn-default btn-cancel">Batal</button></a>
						</div>
						<button class="btn btn-default">Simpan</button>
					</div>
				</form>
			</div>
		</div>
	</div>
	
	<div th:include="footer"></div>

	<script type="text/javascript">
		$(document).ready(function() {
			var loadTingkatPendidikan = function (nama_tingkat_pendidikan_id) {
				$.ajax("/api/tingkat_pendidikan/" + nama_tingkat_pendidikan_id, {
			        success: function(data) {
			        	var listOfInstitusi = JSON.parse(data);
			            
			            var options = "";
			            listOfInstitusi.forEach(function(element) {
			                options += '<option value="' + element.id + '">' + element.nama + '</option>';
			            });
			            console.log(options);
			            $('#institusi_select').html(options);
			        },
			        error: function (data) {
			        	alert('Pilih salah satu!');
			        }
			    });
			}
			try {
				var nama_tingkat_pendidikan_id = $('#nama_tingkat_pendidikan_select').find(':selected').val();
				console.log(nama_tingkat_pendidikan_id); loadTingkatPendidikan(nama_tingkat_pendidikan_id);
			} catch(e){
				console.log(e);
			}
			
			var loadKotaKabupaten = function (nama_provinsi_id) {
				$.ajax("/api/provinsi/" + nama_provinsi_id, {
			        success: function(data) {
			        	var listOfKotaKabupaten = JSON.parse(data);
			            
			            var options = "";
			            listOfKotaKabupaten.forEach(function(element) {
			                options += '<option value="' + element.id + '">' + element.nama + '</option>';
			            });
			            $('#kota_kabupaten_select').html(options);
			        },
			        error: function (data) {
			        	alert('Pilih salah satu!');
			        }
			    });
			};
			try {
				var nama_provinsi_id = $('#nama_provinsi_select').find(':selected').val();
				console.log(nama_provinsi_id); loadKotaKabupaten(nama_provinsi_id);
			} catch(e){
				console.log(e);
			}
			
			$('#myTable').dataTable();
			$('#nama_provinsi_select').on('change', function() {
				/* alert($(this).find(':selected').text() + " dipilih"); */
				var nama_provinsi_id = $(this).find(':selected').val();
				console.log(nama_provinsi_id);
				loadKotaKabupaten(nama_provinsi_id);
			});
			$('#agama_id_select').on('change', function() {
				/* alert($(this).find(':selected').text() + " dipilih"); */
				var nama_agama_id = $(this).find(':selected').val();
			});
			$('#nama_jenjang_select').on('change', function() {
				/* alert($(this).find(':selected').text() + " dipilih"); */
				var nama_jenjang_id = $(this).find(':selected').val();
			});
			$('#nama_tingkat_pendidikan_select').on('change', function() {
				/* alert($(this).find(':selected').text() + " dipilih"); */
				var nama_tingkat_pendidikan_id = $(this).find(':selected').val();
				
				
			});
		});
		
		$(function() {
				// We can attach the `fileselect` event to all file inputs on the page
				$(document).on('change', ':file', function() {
					var input = $(this),
						numFiles = input.get(0).files ? input.get(0).files.length : 1,
						label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
					input.trigger('fileselect', [numFiles, label]);
				});

				// We can watch for our custom `fileselect` event like this
				$(document).ready( function() {
					$(':file').on('fileselect', function(event, numFiles, label) {

						var input = $(this).parents('.input-group').find(':text'),
						log = numFiles > 1 ? numFiles + ' files selected' : label;

						if( input.length ) {
							input.val(log);
						} else {
							if( log ) alert(log);
						}
					});
				});
			});
	</script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-form-validator/2.3.26/jquery.form-validator.min.js">		
	</script>
	<script>
		$.validate({
			modules : 'security',
			onModulesLoaded : function(){
				
			}
		});
	</script>
</body>
</html>